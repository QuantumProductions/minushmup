<html>
<body bgcolor="#CCCCCC">
</body>
<script src="util.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.7.1/pixi.min.js"></script>
<script>
var app = new PIXI.Application(600, 800, {backgroundColor : 0x333333});
document.body.appendChild(app.view);
var p = PIXI.Sprite.fromImage('bunny.png')
p.anchor.set(0.5);
p.x = app.screen.width / 2;
p.y = app.screen.height / 2;
app.stage.addChild(p);

var b = PIXI.Sprite.fromImage('bunny.png')
b.anchor.set(0.5);
b.x = p.x + 100;
b.y = p.y - 30;

b.phase = 0;
b.r = 90;
b.power = 4;

app.stage.addChild(b);



function movePlayer() {

}

function moveBullet(delta) {
    applyThrust(b, b.r, b.power);
    if (b.phase == 0) {
        if (b.y < 0) {
            b.r = getr2(center(b), center(p));
            b.phase = 1;
        }
    } else if (b.phase == 1) {
        if (getDistance(b, p) < 40) {
            b.phase = 0;
            b.r = 90;
        }
        if (b.y + b.height > app.screen.height) {
            b.r -= 180;
            b.phase = 0;
        }
    }
}

app.ticker.add(function(delta) {
    movePlayer();
    moveBullet(delta);
    // p.rotation += 0.01 * delta;  

});
document.body.appendChild(app.view);

</script>